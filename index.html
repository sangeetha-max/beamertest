<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Beamer Auto Open Widget with Userflow</title>

  <!-- Beamer Configuration -->
  <script>
    var beamer_config = {
      product_id: "wuGJmAJh67807", // DO NOT CHANGE
      user_id: "1239"
      filter: "admin",
      button: false
    };
  </script>
  <script src="https://app.getbeamer.com/js/beamer-embed.js" defer></script>

  <!-- Userflow.js Installation -->
  <script>
    !function(){
      var e="undefined"==typeof window?{}:window,t=e.userflow,r=e.history;
      function n(t,n){return function(){var o=new CustomEvent(n),
        s=Array.prototype.slice.call(arguments),a=t.apply(r,s);
        return e.dispatchEvent(o),a}}if(r){e.__userflowStatePatched=!0;
        var o=r.pushState,s=r.replaceState;r.pushState=n(o,"userflow:pushstate"),
        r.replaceState=n(s,"userflow:replacestate")}if(!t){var a="https://js.userflow.com/",l=null;
        t=e.userflow={_stubbed:!0,load:function(){return l||(l=new Promise((function(t,r){
          var n=document.createElement("script");
          n.async=!0;var o=e.USERFLOWJS_ENV_VARS||{};
          "es2020"===(o.USERFLOWJS_BROWSER_TARGET||function(e){for(var t=[
            [/Edg\//,/Edg\/(\d+)/,80],[/OPR\//,/OPR\/(\d+)/,67],
            [/Chrome\//,/Chrome\/(\d+)/,80],[/CriOS\//,/CriOS\/(\d+)/,100],
            [/Safari\//,/Version\/(\d+)/,14],[/Firefox\//,/Firefox\/(\d+)/,74]],r=0;r<t.length;r++){
              var n=t[r],o=n[0],s=n[1],a=n[2];if(e.match(o)){var l=e.match(new RegExp(s));
              if(l&&parseInt(l[1],10)>=a)return"es2020";break}}return"legacy"}
            (navigator.userAgent))?(n.type="module",n.src=o.USERFLOWJS_ES2020_URL||a+"es2020/userflow.js"):
            n.src=o.USERFLOWJS_LEGACY_URL||a+"legacy/userflow.js",n.onload=function(){t()},n.onerror=function(){
            document.head.removeChild(n),l=null;var e=new Error("Could not load Userflow.js");
            console.warn(e.message),r(e)},document.head.appendChild(n)}))),l}};
      }
    }();
  </script>

  <style>
    .beamerTrigger {
      padding: 10px 20px;
      font-size: 16px;
      background-color: #007bff;
      color: #fff;
      border: none;
      cursor: pointer;
      border-radius: 5px;
    }
    .beamerTrigger:hover {
      background-color: #0056b3;
    }
  </style>
</head>

<body>
  <h1>Welcome to Beamer with Userflow Integration</h1>

  <button class="beamerTrigger">Feedback Test</button>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      document.querySelector(".beamerTrigger").addEventListener("click", function() {
        Beamer.show();
      });
    });

    userflow.load().then(() => {
      userflow.init("ct_icfejw4dqreh3oq27ka7wcj6tm");
      userflow.identify("135", {
        name: "teswe",
        email: "test@en331.com",
        locale_code: "en-US",
      });
      userflow.group("123", {
        name: "Acme Inc.",
        plan: "Premium",
        imageurl: "fastly.picsum.photos/id/237/200/300.jpg?hmac=TmmQSbShHz9CdQm0NkEjx1Dyh_Y984R9LpNrpvH2D_U",
        signed_up_at: "2019-06-14T16:25:49Z"
      });
    });
  </script>
</body>
</html>
