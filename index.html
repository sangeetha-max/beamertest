<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Beamer + Userflow Integration</title>

  <!-- ✅ Userflow Script -->
  <script>
    !function () {
      var e = "undefined" == typeof window ? {} : window,
        t = e.userflow,
        r = e.history;
      function n(t, n) {
        return function () {
          var o = new CustomEvent(n),
            s = Array.prototype.slice.call(arguments),
            a = t.apply(r, s);
          return e.dispatchEvent(o), a;
        };
      }
      if (r) {
        e.__userflowStatePatched = !0;
        var o = r.pushState, s = r.replaceState;
        r.pushState = n(o, "userflow:pushstate"),
        r.replaceState = n(s, "userflow:replacestate");
      }
      if (!t) {
        var a = "https://js.userflow.com/", l = null;
        t = e.userflow = {
          _stubbed: !0,
          load: function () {
            return l || (l = new Promise(function (t, r) {
              var n = document.createElement("script");
              n.async = !0;
              var o = e.USERFLOWJS_ENV_VARS || {};
              "es2020" === (o.USERFLOWJS_BROWSER_TARGET || function (e) {
                for (var t = [[/Edg\//, /Edg\/(\d+)/, 80], [/OPR\//, /OPR\/(\d+)/, 67], [/Chrome\//, /Chrome\/(\d+)/, 80], [/CriOS\//, /CriOS\/(\d+)/, 100], [/Safari\//, /Version\/(\d+)/, 14], [/Firefox\//, /Firefox\/(\d+)/, 74]], r = 0; r < t.length; r++) {
                  var n = t[r], o = n[0], s = n[1], a = n[2];
                  if (e.match(o)) {
                    var l = e.match(new RegExp(s));
                    if (l && parseInt(l[1], 10) >= a) return "es2020";
                    break;
                  }
                }
                return "legacy";
              }(navigator.userAgent)) ?
                (n.type = "module", n.src = o.USERFLOWJS_ES2020_URL || a + "es2020/userflow.js") :
                n.src = o.USERFLOWJS_LEGACY_URL || a + "legacy/userflow.js",
                n.onload = function () { t(); },
                n.onerror = function () {
                  document.head.removeChild(n),
                    l = null;
                  var e = new Error("Could not load Userflow.js");
                  console.warn(e.message), r(e);
                },
                document.head.appendChild(n);
            })), l;
          }
        };
        var u = e.USERFLOWJS_QUEUE = e.USERFLOWJS_QUEUE || [],
          i = function (e) {
            t[e] = function () {
              var r = Array.prototype.slice.call(arguments);
              t.load(), u.push([e, null, r]);
            };
          },
          c = function (e) {
            t[e] = function () {
              var r, n = Array.prototype.slice.call(arguments);
              t.load();
              var o = new Promise(function (e, t) { r = { resolve: e, reject: t }; });
              return u.push([e, r, n]), o;
            };
          },
          d = function (e, r) { t[e] = function () { return r; }; };
        i("_setTargetEnv"), i("closeResourceCenter"), i("disableEvalJs"), i("init"), i("off"), i("on"), i("prepareAudio"), i("registerCustomInput"), i("remount"), i("reset"), i("setBaseZIndex"), i("setCustomInputSelector"), i("setCustomNavigate"), i("setCustomScrollIntoView"), i("setInferenceAttributeFilter"), i("setInferenceAttributeNames"), i("setInferenceClassNameFilter"), i("setResourceCenterLauncherHidden"), i("setScrollPadding"), i("setServerEndpoint"), i("setShadowDomEnabled"), i("setPageTrackingDisabled"), i("setUrlFilter"), i("setLinkUrlDecorator"), i("openResourceCenter"), i("toggleResourceCenter"), c("endAll"), c("endAllFlows"), c("endChecklist"), c("group"), c("identify"), c("identifyAnonymous"), c("start"), c("startFlow"), c("startWalk"), c("track"), c("updateGroup"), c("updateUser"), c("debugger"), d("getResourceCenterState", null), d("isIdentified", !1)
      }
    }();

    var isoDateString = new Date().toISOString();

    userflow.init("ct_4dyikjwlbrdyvhjsljhjnvzgeq");
    userflow.identify("hubtest145", {
      name: 'hubspot',
      email: 'email@hubspottest.com',
      device_type: window.innerWidth > 800 ? 'desktop' : 'mobile',
      signed_up_at: isoDateString,
    });
  </script>

  <!-- ✅ Beamer Configuration -->
  <script>
    var beamer_config = {
      product_id: "wuGJmAJh67807",
      user_id: "2970",
      filter: "admin",
    };
  </script>

  <!-- ✅ Beamer Script -->
  <script src="https://app.getbeamer.com/js/beamer-embed.js" defer></script>

  <style>
    .beamerTrigger {
      padding: 10px 20px;
      font-size: 16px;
      background-color: #007bff;
      color: #fff;
      border: none;
      cursor: pointer;
      border-radius: 5px;
    }
    .beamerTrigger:hover {
      background-color: #0056b3;
    }
  </style>
</head>

<body>
  <h1>Welcome to Beamer + Userflow Integration</h1>

  <button class="beamerTrigger">Feedback Test</button>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      document.querySelector(".beamerTrigger").addEventListener("click", function () {
        if (window.Beamer) {
          Beamer.show();
        } else {
          console.error("Beamer is not loaded yet.");
        }
      });
    });
  </script>
</body>
</html>
